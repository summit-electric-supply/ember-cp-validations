<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Advanced - Ember CP Validations</title>
    <meta name="description" content="Ember computed property based validations">
    <link rel="stylesheet" href="http://yui.yahooapis.com/3.9.1/build/cssgrids/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <link rel="stylesheet" href="../assets/css/custom.css">
    <link rel="stylesheet" href="../assets/vendor/bootstrap/css/bootstrap.css">
    <link rel="stylesheet" href="../assets/vendor/font-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" href="../assets/css/theme.css">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700' rel='stylesheet' type='text/css'>
    

</head>
<body>
    <nav class="navbar navbar-default">
      <div class="container-fluid">
        <div class="navbar-header">
          <a href="../" class="navbar-brand">
              <img src="../assets/img/ember-logo.png" alt="enterprise logo">
            <span>CP Validations</span>
          </a>
        </div>

        <div class="collapse navbar-collapse" id="nav">
          <ul class="nav navbar-nav navbar-right">
            <li><a href="https://github.com/summit-electric-supply/ember-cp-validations" class="fa fa-github github"></a></li>
          </ul>
        </div>
      </div>
    </nav>
    <div id="main-wrapper" class="row">
        <div id="content-wrapper">
            <ol class="panel-group" id="sidebar" role="tablist" aria-multiselectable="true">
                <li class="panel panel-default">
                    <div class="panel-heading" role="tab" id="sidebar-search-heading">
                        <h4 class="panel-title">
                      <a role="button" data-toggle="collapse" href="#sidebar-search" aria-expanded="true" aria-controls="collapseOne">
                        Search
                      </a>
                    </h4>
                    </div>
                    <div id="sidebar-search" class="panel-collapse collapse in" role="tabpanel" aria-labelledby="sidebar-search-heading">
                        <div class="panel-body">
                            <div id="api-tabview-filter">
                                <input type="search" id="api-filter" placeholder="Search...">
                            </div>
                        </div>
                    </div>
                </li>
                    <li class="panel panel-default">
                        <div class="panel-heading" role="tab" id="sidebar-version-heading">
                            <h4 class="panel-title">
                                <a role="button" href="https://github.com/summit-electric-supply/ember-cp-validations/commits/v4.1.0-beta.1" target="_blank">
                                  Tag: v4.1.0-beta.1
                                </a>
                            </h4>
                        </div>
                    </li>
                <li class="panel panel-default">
                    <div class="panel-heading" role="tab" id="sidebar-modules-heading">
                        <h4 class="panel-title">
                    <a role="button" data-toggle="collapse" href="#sidebar-modules" aria-expanded="true" aria-controls="collapseOne">
                      Modules
                    </a>
                  </h4>
                    </div>
                    <div id="sidebar-modules" class="panel-collapse collapse in" role="tabpanel" aria-labelledby="sidebar-modules-heading">
                        <div class="panel-body">
                                <ol>
                                        <li>
                                            <a href="../modules/Usage.html">Usage</a>
                                                    <li class="sub"><a href="../modules/Basic.html">Basic</a></li>
                                                    <li class="sub"><a href="../modules/Advanced.html">Advanced</a></li>
                                                    <li class="sub"><a href="../modules/I18n Solutions.html">I18n Solutions</a></li>
                                        </li>
                                        <li>
                                            <a href="../modules/Validations.html">Validations</a>
                                                    <li class="sub"><a href="../modules/Accessing Validations.html">Accessing Validations</a></li>
                                        </li>
                                        <li>
                                            <a href="../modules/Validators.html">Validators</a>
                                                    <li class="sub"><a href="../modules/Common Options.html">Common Options</a></li>
                                        </li>
                                </ol>
                        </div>
                    </div>
                </li>
            
                <li class="panel panel-default">
                    <div class="panel-heading" role="tab" id="sidebar-classes-heading">
                        <h4 class="panel-title">
                      <a role="button" data-toggle="collapse" href="#sidebar-classes" aria-expanded="true" aria-controls="collapseOne">
                        Classes
                      </a>
                    </h4>
                    </div>
                    <div id="sidebar-classes" class="panel-collapse collapse in" role="tabpanel" aria-labelledby="sidebar-classes-heading">
                        <div class="panel-body">
                            <ol>
                                    <li>
                                        <a href="../classes/Alias.html">Alias</a>
                                    </li>
                                    <li>
                                        <a href="../classes/Base.html">Base</a>
                                    </li>
                                    <li>
                                        <a href="../classes/Belongs To.html">Belongs To</a>
                                    </li>
                                    <li>
                                        <a href="../classes/Collection.html">Collection</a>
                                    </li>
                                    <li>
                                        <a href="../classes/Confirmation.html">Confirmation</a>
                                    </li>
                                    <li>
                                        <a href="../classes/Custom.html">Custom</a>
                                    </li>
                                    <li>
                                        <a href="../classes/Date.html">Date</a>
                                    </li>
                                    <li>
                                        <a href="../classes/Dependent.html">Dependent</a>
                                    </li>
                                    <li>
                                        <a href="../classes/DS Error.html">DS Error</a>
                                    </li>
                                    <li>
                                        <a href="../classes/Error.html">Error</a>
                                    </li>
                                    <li>
                                        <a href="../classes/Exclusion.html">Exclusion</a>
                                    </li>
                                    <li>
                                        <a href="../classes/Factory.html">Factory</a>
                                    </li>
                                    <li>
                                        <a href="../classes/Format.html">Format</a>
                                    </li>
                                    <li>
                                        <a href="../classes/Has Many.html">Has Many</a>
                                    </li>
                                    <li>
                                        <a href="../classes/Inclusion.html">Inclusion</a>
                                    </li>
                                    <li>
                                        <a href="../classes/Inline.html">Inline</a>
                                    </li>
                                    <li>
                                        <a href="../classes/Length.html">Length</a>
                                    </li>
                                    <li>
                                        <a href="../classes/Messages.html">Messages</a>
                                    </li>
                                    <li>
                                        <a href="../classes/Number.html">Number</a>
                                    </li>
                                    <li>
                                        <a href="../classes/Presence.html">Presence</a>
                                    </li>
                                    <li>
                                        <a href="../classes/Result.html">Result</a>
                                    </li>
                                    <li>
                                        <a href="../classes/ResultCollection.html">ResultCollection</a>
                                    </li>
                            </ol>
                        </div>
                    </div>
                </li>
            </ol>
            <div class="content-container">
                <div class="apidocs">
                    <div id="docs-main">
                        <div class="content">


<div class="page-header">
    <h1> <i class="fa fa-bookmark-o" aria-hidden="true"></i> Advanced Module
              <a class="pull-right file-edit" href="https://github.com/summit-electric-supply/ember-cp-validations/blob/v4.1.0-beta.1/addon/index.js#L149" target="_blank">
                <i class="fa fa-pencil" aria-hidden="true"></i>
              </a>
    </h1>
</div>

<div class="content-meta">


        <div class="foundat">
            Defined in: <a href="https://github.com/summit-electric-supply/ember-cp-validations/blob/v4.1.0-beta.1/addon/index.js#L149">addon/index.js:149</a>
        </div>

</div>


<div class="module-description page-section">
    <h3>Default Options</h3>
<p>Default options can be specified over a set of validations for a given attribute. Local properties will always take precedence.</p>
<p>Instead of doing the following:</p>
<pre class="code prettyprint"><code class="language-javascript">const Validations = buildValidations({
  username: [
    validator('presence', {
      presence: true,
      description: 'Username'
    }),
    validator('length', {
      min: 1,
      description: 'Username'
    }),
    validator('my-custom-validator', {
      description: 'A username'
    })
  ]
});
</code></pre>
<p>We can declare default options:</p>
<pre class="code prettyprint"><code class="language-javascript">const Validations = buildValidations({
  username: {
    description: 'Username'
    validators: [
      validator('presence', true),
      validator('length', {
        min: 1
      }),
      validator('my-custom-validator', {
        description: 'A username'
      })
    ]
  },
});
</code></pre>
<p>In the above example, all the validators for username will have a description of <code>Username</code> except that of the <code>my-custom-validator</code> validator which will be <code>A username</code>.</p>
<h3>Global Options</h3>
<p>If you have  specific options you want to propagate through all your validation rules, you can do so by passing in a global options object.
This is ideal for when you have a dependent key that each validator requires such as the current locale from your i18n implementation, or
you want easily toggle your validations on/off. As of 3.x, all dependent keys must be prefixed with <code>model</code>.</p>
<pre class="code prettyprint"><code class="language-javascript">const Validations = buildValidations(validationRules, globalOptions);
</code></pre>
<pre class="code prettyprint"><code class="language-javascript">import Ember from 'ember';
import { validator, buildValidations } from '@summit-electric-supply/ember-cp-validations';

const Validations = buildValidations({
  firstName: {
    description: 'First Name'
    validators: [
      validator('presence', {
        presence: true,
        dependentKeys: ['model.foo', 'model.bar']
      })
     ]
   },
  lastName: validator('presence', true)
}, {
  description: 'This field'
  dependentKeys: ['model.i18n.locale'],
  disabled: computed.readOnly('model.disableValidations')
});
</code></pre>
<p>Just like in the default options, locale validator options will always take precedence over default options and default options will always take precedence
over global options. This allows you to declare global rules while having the ability to override them in lower levels.</p>
<p>This rule does not apply to <code>dependentKeys</code>, instead they all are merged. In the example above, <strong>firstName</strong>'s dependentKeys will be
<code>['model.i18n.locale', 'model.foo', 'model.bar']</code></p>
<h3>Computed Options</h3>
<p>All options can also be Computed Properties. These CPs have access to the <code>model</code> and <code>attribute</code> that is associated with the validator.</p>
<p>Please note that the <code>message</code> option of a validator can also be a function with <a href="http://offirgolan.github.io/ember-cp-validations/docs/modules/Validators.html#message">the following signature</a>.</p>
<pre class="code prettyprint"><code class="language-javascript">const Validations = buildValidations({
  username: validator('length', {
    disabled: Ember.computed.not('model.meta.username.isEnabled'),
    min: Ember.computed.readOnly('model.meta.username.minLength'),
    max: Ember.computed.readOnly('model.meta.username.maxLength'),
    description: Ember.computed(function() {
      // CPs have access to the <code>model</code> and <code>attribute</code>
      return this.get('model').generateDescription(this.get('attribute'));
    }).volatile() // Disable caching and force recompute on every get call
  })
});
</code></pre>
<h3>Nested Keys</h3>
<p>When declaring object validations (not including Ember Data models), it is possible to validate child objects from the parent object.</p>
<pre class="code prettyprint"><code class="language-javascript">import Ember from 'ember';
import { validator, buildValidations } from '@summit-electric-supply/ember-cp-validations';

const Validations = buildValidations({
  'acceptTerms': validator('inclusion', { in: [ true ] }),
  'user.firstName': validator('presence', true),
  'user.lastName': validator('presence', true),
  'user.account.number': validator('number')
});

export default Ember.Component.extend(Validations, {
  acceptTerms: false,
  user:  {
    firstName: 'John',
    lastName: 'Doe' ,
    account: {
      number: 123456,
    }
  },
  isFormValid: Ember.computed.alias('validations.isValid'),
});
</code></pre>

</div>


                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script src="../assets/vendor/prettify/prettify-min.js"></script>
    <script>prettyPrint();</script>
    <script src="../assets/vendor/jquery/jquery.min.js"></script>
    <script src="../assets/vendor/jquery-ui/jquery-ui.min.js"></script>
    <script src="../assets/vendor/bootstrap/js/bootstrap.js"></script>
    <script src="../assets/vendor/github-slugger/slugger.js"></script>
    <script src="../assets/js/yuidoc-bootstrap.js"></script>
</body>
</html>
